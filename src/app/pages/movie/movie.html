<ng-container *ngIf="movie">
  <slider [items]="[movie]" [isBanner]="true"></slider>
  <div class="card">
    <p-tabs value="0">
      <p-tablist>
        <p-tab value="0">Overview</p-tab>
        <p-tab value="1">Videos</p-tab>
        <p-tab value="2">Photos</p-tab>
      </p-tablist>
      <p-tabpanels>
        <p-tabpanel value="0">
          <div class="grid">
            <div class="col-12 md:col-3 lg:col-3">
              <img
                class="poster"
                [src]="imagessizes.MEDIUM + movie.poster_path"
                [alt]="movie.title"
              />
            </div>
            <div class="col-12 md:col-9 lg:col-9 overviewcontent">
              <h2>Overview</h2>
              <p>{{ movie.overview }}</p>

              <div class="stat">
                <b class="label">Release Date: </b>
                <span class="value">{{ movie.release_date | date : 'dd.MM.yyyy' }}</span>
              </div>
              <div class="stat">
                <b class="label">Rating: </b>
                <span class="value">{{ movie.vote_average }} / 10</span>
              </div>
              <div class="stat">
                <b class="label">Language: </b>
                <span class="value">{{ movie.original_language | uppercase }}</span>
              </div>
              <div class="stat">
                <b class="label">Revenue: </b>
                <span class="value">{{ movie.revenue | currency }}</span>
              </div>
              <div class="stat">
                <b class="label">Duration: </b>
                <span class="value">{{ movie.runtime }} min</span>
              </div>
              <div class="stat">
                <b class="label">Status: </b>
                <span class="value">{{ movie.status }} </span>
              </div>
              <div class="stat">
                <b class="label">Genres: </b>
                <div class="value">
                  <span *ngFor="let genre of movie.genres; let isLast = last">
                    {{ genre.name }}<span *ngIf="!isLast">, </span>
                  </span>
                </div>
              </div>
            </div>
          </div>
        </p-tabpanel>
        <p-tabpanel value="1">
          <div class="grid">
            <ng-container *ngFor="let movieVideo of movieVideos">
              <div class="col-12 md:col-4 lg:col-4 mb-4">
                <video-embed
                  *ngIf="movieVideo.site === 'YouTube'"
                  [key]="movieVideo.key"
                  [site]="movieVideo.site"
                ></video-embed>
              </div>
            </ng-container>
          </div>
        </p-tabpanel>
        <p-tabpanel value="2">
          <div class="grid">
            <ng-container *ngFor="let movieImage of movieImages?.backdrops">
              <div class="col-12 md:col-4 lg:col-4 mb-4">
                <p-image
                  [src]="imagessizes.LARGE + movieImage.file_path"
                  alt="Image"
                  width="100%"
                  [preview]="true"
                />
              </div>
            </ng-container>
          </div>
        </p-tabpanel>
      </p-tabpanels>
    </p-tabs>
  </div>

  <div class="card mt-4" *ngIf="similarMovies && similarMovies.length > 0">
    <h2>Similar Movies</h2>
    <itemscards [items]="similarMovies" [title]="''"></itemscards>
  </div>
</ng-container>

<p-carousel *ngIf="movieCredits" [value]="movieCredits.cast" [numVisible]="3" [numScroll]="1">
  <ng-template pTemplate="item" let-actor>
    <div class="flex flex-column align-items-center gap-3 p-4">
      <img
        *ngIf="actor.profile_path"
        [src]="imagessizes.MEDIUM + actor.profile_path"
        alt="Actor"
        class="rounded-full"
        width="200"
        height="300"
      />
      <div class="text-center">
        <p class="m-0 font-semibold">{{ actor.name }}</p>
        <p class="m-0 text-sm text-500">{{ actor.character }}</p>
      </div>
    </div>
  </ng-template>
</p-carousel>
